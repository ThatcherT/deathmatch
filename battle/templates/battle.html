{% load static %}
{% comment %} You need this load static line to use css files {% endcomment %}
<!DOCTYPE html>
<html>
<head>
<title> Fight </title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
{% comment %}
 This is how you load style sheets with django 
# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/3.2/howto/static-files/
{% endcomment %}
<link rel="stylesheet" href="{% static 'battle/css/styles.css' %}">
<script src="{% static 'battle/js/eyes.js' %}"></script>
</head> 
<body>
{% comment %} These variables are initialized as empty
later they are updated using jquery

With jquery, you can grab and manipulate elements.
To grab an element by its id, use the # symbol.
To grab an element by its class, use the . symbol.
To grab an element by its tag, use the tag name.
    
    To change the text of an element, use the .text() method.
    To change the html of an element, use the .html() method.
    To change the css of an element, use the .css() method.
    To change the value of an element, use the .val() method.
    To change the src of an element, use the .attr() method.
    ^^^ copilot wrote all that so I assume it works

Example:
If you want to grab the player health and update it
you would do this:
    
    $("#playerHealth").text(1002);
    
    this grabs the element with id playerHealth and changes its text to 1002


 {% endcomment %}
{% comment %}  here is an example of using a class loaded from stylesheet located in battle/static/battle/css {% endcomment %}
<section class="move-area">
  <div class='.container'>
    <div class='player'></div>
    <div class='player'></div>
  </div>
</section>
<p id="enemy_attack_log" style="color:red;"></p>
<p id="player_attack_log" style="color:black;"></p>
<p id="enemy_attack_log2" style="color:red;"></p>
<p id="player_attack_log2" style="color:black;"></p>
Player Health
<p id="health_player" style="color: green"></p>
Enemy Health<p id="health_enemy" style="color: red"></p>
Enemy Spec<p id="spec_enemy" style="color: blue"></p>
Player Spec<p id="spec_player" style="color: blue"></p>
<p id="poison_damage_player" hidden="true"></p>
<p id="poison_damage_enemy" hidden="true"></p>
<p id="frozen_player" hidden="true"></p>
<p id="frozen_enemy" hidden="true"></p>



<form action="" id='weaponform'>
  {% csrf_token %}
  <label id="weapon-label" for="weapon" hidden="True">Weapon:</label>
  <input type="text" id="weapon-input" name="weapon" hidden="True"><br><br>
  <input id="battle-button" type="submit" value="Begin">
</form>

    

<script>  

    $("#weaponform").submit(function(e){
        e.preventDefault();
        let button_val = $("#battle-button").val();
        let csrftoken = "{{ csrf_token }}";

        // if button is "Begin", set url variable and send data to url with .ajax
        if (button_val == "Begin"){
            // set url to start battle api endpoint
            // this will return environment variables after the bot has made its first move
            var url = "{% url 'start-battle' %}";
            // show hidden weapon input and label
            $("#weapon-label").show();
            $("#weapon-input").show();
            // set button value to "Choose Weapon"
            $("#battle-button").val("Choose Weapon");
        }
            
        else if (button_val == "Choose Weapon"){
            var url = "{% url 'attack' %}";
        }
        console.log($("#weapon-input").val());
        $.ajax({
            type: "POST",
            url: url,
            headers: {'X-CSRFToken': csrftoken },
            data: {
                // send environment variables to back end for updating and opponent attack
                weapon: $('#weapon-input').val(),
                health_player: $('#health_player').html(),
                health_enemy: $('#health_enemy').html(),
                spec_player: $('#spec_player').html(),
                spec_enemy: $('#spec_enemy').html(),
                poison_damage_player: $('#poison_damage_player').html(),
                poison_damage_enemy: $('#poison_damage_enemy').html(),
                frozen_player: $('#frozen_player').html(),
                frozen_enemy: $('#frozen_enemy').html(),
            },
            success: function(data){
                if (data.error == 'Illegal weapon'){
                    alert('Illegal weapon')
                }
                // update html with new values if weapon is legal
                $('#health_player').html(data.health_player)
                $('#health_enemy').html(data.health_enemy)
                $('#spec_player').html(data.spec_player)
                $('#spec_enemy').html(data.spec_enemy)
                $('#poison_damage_player').html(data.poison_damage_player)
                $('#poison_damage_enemy').html(data.poison_damage_enemy)
                $('#frozen_player').html(data.frozen_player)
                $('#frozen_enemy').html(data.frozen_enemy)                
                $('#enemy_attack_log').html(data.enemy_attack_log)
                $('#player_attack_log').html(data.player_attack_log)
                // if either player ends up with zero health, the game is over and will be apparent in attack log
                if (data.player_attack_log == 'You have been defeated, you lose!' || data.enemy_attack_log == 'Enemy has been defeated, you win!')
                    {
                        // update button_val html to "Attack"
                        $("#battle-button").val("Begin")
                        // show weapon input box and label
                        $("#weapon-label").hide()
                        $("#weapon-input").hide()
                    }
            }
        });
        
    });
</script>
</body>
</html>